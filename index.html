<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROFTA - Complete Earning Platform</title>
    <meta name="monetag" content="81a4bbac7a7d6a205bdb23ed4055ded6">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <style>
        :root {
            --primary: #0a0f2d;
            --secondary: #1e3a8a;
            --accent: #00ff88;
            --light: #f8f9fa;
            --dark: #121212;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --card-bg: rgba(255, 255, 255, 0.1);
            --button-gradient: linear-gradient(135deg, #1e3a8a, #00ff88);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a0f2d, #1e3a8a);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(10, 15, 45, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            font-size: 24px;
            background: linear-gradient(to right, #fff, var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }

        .logo-icon {
            color: var(--accent);
            font-size: 28px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .coins {
            background: var(--card-bg);
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .coins i {
            color: gold;
        }

        .profile-btn {
            background: var(--button-gradient);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: var(--card-bg);
            border: none;
            color: var(--light);
            padding: 12px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--button-gradient);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        /* Screen Styles */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-title {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #fff, var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }

        .welcome-subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: rgba(255, 255, 255, 0.8);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            min-width: 180px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .auth-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }

        .auth-btn {
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .register-btn {
            background: var(--button-gradient);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .login-btn {
            background: transparent;
            color: white;
            border: 2px solid var(--accent);
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 255, 136, 0.4);
        }

        /* Home Screen */
        .home-screen {
            padding: 20px 0;
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent);
        }

        .earning-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .card:hover::before {
            left: 100%;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .card-icon {
            width: 70px;
            height: 70px;
            background: var(--button-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 28px;
        }

        .card-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .card-desc {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .card-coins {
            color: gold;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .card-btn {
            background: var(--button-gradient);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }

        .card-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .card-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Auth Forms */
        .auth-form {
            max-width: 500px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .form-title {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
            color: var(--accent);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-btn {
            width: 100%;
            padding: 12px;
            background: var(--button-gradient);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .form-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: rgba(255, 255, 255, 0.7);
        }

        .form-link {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
        }

        .form-link:hover {
            text-decoration: underline;
        }

        /* Profile Screen */
        .profile-screen {
            padding: 20px 0;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            position: relative;
        }

        .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--card-bg);
            border: none;
            color: var(--light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: var(--button-gradient);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: var(--button-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .profile-info h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .profile-info p {
            color: rgba(255, 255, 255, 0.7);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .profile-stat {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .profile-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .profile-stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .withdrawal-history {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
        }

        .history-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .history-table th, .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-table th {
            color: var(--accent);
            font-weight: 600;
        }

        .status-pending {
            color: var(--warning);
        }

        .status-completed {
            color: var(--success);
        }

        /* Redeem Screen */
        .redeem-screen {
            padding: 20px 0;
        }

        .redeem-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .redeem-options {
                grid-template-columns: 1fr;
            }
        }

        .redeem-option {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
        }

        .option-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent);
        }

        .redeem-amounts {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .amount-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .amount-option:hover, .amount-option.selected {
            border-color: var(--accent);
            background: rgba(0, 255, 136, 0.1);
        }

        .amount-value {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .amount-coins {
            color: gold;
            font-size: 0.9rem;
        }

        /* Subscription Screen */
        .subscription-screen {
            padding: 20px 0;
        }

        .plans {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .plan {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .plan:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .plan-name {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .plan-price {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 25px;
        }

        .plan-features li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .plan-features li:last-child {
            border-bottom: none;
        }

        .plan-btn {
            background: var(--button-gradient);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }

        .plan-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        /* Earning Feature Screens */
        .feature-screen {
            padding: 20px 0;
        }

        .feature-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .feature-back-btn {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: var(--card-bg);
            border: none;
            color: var(--light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .feature-back-btn:hover {
            background: var(--button-gradient);
        }

        .feature-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .feature-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .feature-content {
            max-width: 600px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .feature-rules {
            text-align: left;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .feature-rules h3 {
            margin-bottom: 10px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-rules ul {
            padding-left: 20px;
        }

        .feature-rules li {
            margin-bottom: 8px;
        }

        .timer {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin: 20px 0;
        }

        .ad-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .ad-code {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            word-break: break-all;
        }

        .scratch-area {
            width: 300px;
            height: 200px;
            background: linear-gradient(45deg, #1e3a8a, #0a0f2d);
            margin: 20px auto;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .scratch-cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff9900, #ffcc00);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .scratch-result {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: gold;
        }

        .wheel-container {
            width: 300px;
            height: 300px;
            margin: 20px auto;
            position: relative;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #ff0000 0deg 45deg,
                #ff9900 45deg 90deg,
                #ffff00 90deg 135deg,
                #00ff00 135deg 180deg,
                #00ffff 180deg 225deg,
                #0000ff 225deg 270deg,
                #9900ff 270deg 315deg,
                #ff00ff 315deg 360deg
            );
            position: relative;
            transition: transform 3s cubic-bezier(0.2, 0.8, 0.3, 1);
        }

        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 40px;
            background: var(--accent);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
        }

        .spin-btn {
            background: var(--button-gradient);
            border: none;
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .spin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .visit-timer {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent);
            margin: 30px 0;
        }

        .referral-code {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .share-btn {
            padding: 10px 20px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-btn.whatsapp {
            background: #25D366;
            color: white;
        }

        .share-btn.telegram {
            background: #0088cc;
            color: white;
        }

        .share-btn.facebook {
            background: #3b5998;
            color: white;
        }

        .share-btn:hover {
            transform: translateY(-3px);
        }

        /* Payment Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--accent);
            text-align: center;
        }

        .payment-details {
            margin-bottom: 20px;
        }

        .payment-details p {
            margin-bottom: 10px;
        }

        .qr-section {
            text-align: center;
            background: #111;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-top: 2px solid var(--accent);
        }

        .qr-section h3 {
            color: var(--accent);
            font-size: 20px;
            margin-bottom: 8px;
        }

        .qr-section p {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .qr-code {
            margin: 15px 0;
        }

        .qr-code img {
            width: 200px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .pay-now-btn {
            display: inline-block;
            background: var(--accent);
            color: #111;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 700;
            transition: 0.3s;
            margin-top: 10px;
        }

        .pay-now-btn:hover {
            background: #00cc66;
            transform: translateY(-2px);
        }

        .payment-upload {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .payment-upload:hover {
            border-color: var(--accent);
        }

        .payment-upload i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .file-input {
            display: none;
        }

        .file-name {
            margin-top: 10px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .modal-btn.confirm {
            background: var(--accent);
            color: var(--primary);
        }

        .modal-btn.cancel {
            background: var(--danger);
            color: white;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        .loading {
            display: none;
            text-align: center;
            margin: 10px 0;
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--accent);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Ad Modal */
        .ad-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .ad-modal.active {
            display: flex;
        }

        .ad-content {
            background: white;
            color: black;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .ad-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .ad-code-box {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .ad-timer {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin: 20px 0;
        }

        .ad-close {
            background: var(--danger);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 20px;
            display: none;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--accent);
            text-decoration: none;
        }

        .footer-link:hover {
            text-decoration: underline;
        }

        .contact-email {
            margin-top: 10px;
            font-size: 1rem;
        }

        /* Banner Ads */
        .banner-ad {
            margin: 20px 0;
            text-align: center;
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Premium Badge */
        .premium-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: var(--primary);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-left: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2.2rem;
            }
            
            .welcome-subtitle {
                font-size: 1.2rem;
            }
            
            .stats {
                gap: 15px;
            }
            
            .stat-card {
                min-width: 140px;
                padding: 15px;
            }
            
            .auth-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .auth-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .earning-cards {
                grid-template-columns: 1fr;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
                padding-left: 60px;
            }
            
            .plans {
                grid-template-columns: 1fr;
            }
            
            .scratch-area, .wheel-container {
                width: 250px;
                height: 250px;
            }
            
            .feature-header {
                padding-left: 50px;
            }
            
            .qr-code img {
                width: 180px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <i class="fas fa-coins logo-icon"></i>
            <h1>PROFTA</h1>
        </div>
        <div class="user-info" id="userInfo">
            <div class="coins">
                <i class="fas fa-coins"></i>
                <span id="coinBalance">0</span>
            </div>
            <button class="profile-btn" id="profileBtn">
                <i class="fas fa-user"></i>
            </button>
        </div>
    </header>

    <!-- Navigation (Hidden on Welcome Screen) -->
    <nav id="mainNav" style="display: none;">
        <button class="nav-btn active" data-screen="home">
            <i class="fas fa-home"></i> Home
        </button>
        <button class="nav-btn" data-screen="redeem">
            <i class="fas fa-gift"></i> Redeem
        </button>
        <button class="nav-btn" data-screen="subscription">
            <i class="fas fa-crown"></i> Premium
        </button>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen welcome-screen active" id="welcomeScreen">
            <div class="welcome-content">
                <h1 class="welcome-title">Earn Money Online with PROFTA</h1>
                <p class="welcome-subtitle">Join thousands of users who are earning daily with our platform</p>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">10,000+</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">₹50,000+</div>
                        <div class="stat-label">Paid Out</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4.8★</div>
                        <div class="stat-label">User Rating</div>
                    </div>
                </div>
                
                <!-- Banner Ad -->
                <div class="banner-ad">
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                            'format' : 'iframe',
                            'height' : 50,
                            'width' : 320,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
                </div>
                
                <div class="auth-buttons">
                    <button class="auth-btn register-btn" id="showRegister">Register Now</button>
                    <button class="auth-btn login-btn" id="showLogin">Login</button>
                </div>
            </div>
        </div>

        <!-- Home Screen -->
        <div class="screen home-screen" id="homeScreen">
            <h2 class="section-title"><i class="fas fa-money-bill-wave"></i> Earning Methods</h2>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="earning-cards">
                <div class="card" data-feature="dailyBonus">
                    <div class="card-icon">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <h3 class="card-title">Daily Bonus</h3>
                    <p class="card-desc">Claim your daily bonus every 24 hours</p>
                    <div class="card-coins">
                        <i class="fas fa-coins"></i> <span id="dailyBonusAmount">20</span> Coins
                    </div>
                    <button class="card-btn" id="dailyBonusBtn">Claim Now</button>
                </div>
                
                <div class="card" data-feature="watchAd">
                    <div class="card-icon">
                        <i class="fas fa-tv"></i>
                    </div>
                    <h3 class="card-title">Watch Ads</h3>
                    <p class="card-desc">Watch short ads and earn coins</p>
                    <div class="card-coins">
                        <i class="fas fa-coins"></i> <span id="adRewardAmount">10</span> Coins per Ad
                    </div>
                    <button class="card-btn" id="watchAdBtn">Watch Ad</button>
                </div>
                
                <div class="card" data-feature="scratchCard">
                    <div class="card-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <h3 class="card-title">Scratch Cards</h3>
                    <p class="card-desc">Scratch and win up to 10 coins</p>
                    <div class="card-coins">
                        <i class="fas fa-coins"></i> <span id="scratchRewardAmount">0-10</span> Coins
                    </div>
                    <button class="card-btn" id="scratchCardBtn">Scratch Now</button>
                </div>
                
                <div class="card" data-feature="spinWheel">
                    <div class="card-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <h3 class="card-title">Spin Wheel</h3>
                    <p class="card-desc">Spin the wheel and win coins</p>
                    <div class="card-coins">
                        <i class="fas fa-coins"></i> <span id="spinRewardAmount">0-10</span> Coins
                    </div>
                    <button class="card-btn" id="spinWheelBtn">Spin Now</button>
                </div>
                
                <div class="card" data-feature="visitEarn">
                    <div class="card-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3 class="card-title">Visit & Earn</h3>
                    <p class="card-desc">Visit websites and earn coins</p>
                    <div class="card-coins">
                        <i class="fas fa-coins"></i> <span id="visitRewardAmount">30</span> Coins
                    </div>
                    <button class="card-btn" id="visitEarnBtn">Visit Now</button>
                </div>
                
                <div class="card" data-feature="referEarn">
                    <div class="card-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <h3 class="card-title">Refer & Earn</h3>
                    <p class="card-desc">Refer friends and earn 100 coins each</p>
                    <div class="card-coins">
                        <i class="fas fa-coins"></i> <span id="referRewardAmount">100</span> Coins
                    </div>
                    <button class="card-btn" id="referEarnBtn">Refer Now</button>
                </div>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
        </div>

        <!-- Register Screen -->
        <div class="screen" id="registerScreen">
            <div class="auth-form">
                <h2 class="form-title">Create Account</h2>
                
                <!-- Banner Ad -->
                <div class="banner-ad">
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                            'format' : 'iframe',
                            'height' : 50,
                            'width' : 320,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
                </div>
                
                <form id="registerForm">
                    <div class="form-group">
                        <label class="form-label" for="regName">Full Name</label>
                        <input type="text" class="form-input" id="regName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="regEmail">Email Address</label>
                        <input type="email" class="form-input" id="regEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="regPassword">Password</label>
                        <input type="password" class="form-input" id="regPassword" placeholder="Create a password" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="referralCode">Referral Code (Optional)</label>
                        <input type="text" class="form-input" id="referralCode" placeholder="Enter referral code if any">
                    </div>
                    <button type="submit" class="form-btn">Register Now</button>
                </form>
                <div class="form-footer">
                    Already have an account? <a href="#" class="form-link" id="showLoginFromReg">Login here</a>
                </div>
            </div>
        </div>

        <!-- Login Screen -->
        <div class="screen" id="loginScreen">
            <div class="auth-form">
                <h2 class="form-title">Login to PROFTA</h2>
                
                <!-- Banner Ad -->
                <div class="banner-ad">
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                            'format' : 'iframe',
                            'height' : 50,
                            'width' : 320,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
                </div>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="loginEmail">Email Address</label>
                        <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="loginPassword">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="form-btn">Login</button>
                </form>
                <div class="form-footer">
                    Don't have an account? <a href="#" class="form-link" id="showRegisterFromLogin">Register here</a>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div class="screen profile-screen" id="profileScreen">
            <div class="profile-header">
                <button class="back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="profile-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-info">
                    <h2 id="profileName">User Name</h2>
                    <p id="profileEmail">user@example.com</p>
                    <div id="premiumStatus"></div>
                </div>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
            
            <div class="profile-stats">
                <div class="profile-stat">
                    <div class="profile-stat-value" id="totalEarnings">0</div>
                    <div class="profile-stat-label">Total Earnings</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="totalReferrals">0</div>
                    <div class="profile-stat-label">Referrals</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="daysActive">1</div>
                    <div class="profile-stat-label">Days Active</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="withdrawalsCount">0</div>
                    <div class="profile-stat-label">Withdrawals</div>
                </div>
            </div>
            
            <div class="withdrawal-history">
                <h3 class="history-title"><i class="fas fa-history"></i> Withdrawal History</h3>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Coins</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="withdrawalHistoryBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Redeem Screen -->
        <div class="screen redeem-screen" id="redeemScreen">
            <h2 class="section-title"><i class="fas fa-gift"></i> Redeem Your Coins</h2>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="redeem-options">
                <div class="redeem-option">
                    <h3 class="option-title"><i class="fas fa-money-bill-wave"></i> UPI Redemption</h3>
                    <p>Withdraw your earnings directly to your UPI ID</p>
                    
                    <div class="redeem-amounts">
                        <div class="amount-option" data-amount="10" data-coins="3000">
                            <div class="amount-value">$10</div>
                            <div class="amount-coins">3000 Coins</div>
                        </div>
                        <div class="amount-option" data-amount="100" data-coins="10000">
                            <div class="amount-value">$100</div>
                            <div class="amount-coins">10000 Coins</div>
                        </div>
                        <div class="amount-option" data-amount="500" data-coins="15000">
                            <div class="amount-value">$500</div>
                            <div class="amount-coins">15000 Coins</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="upiId">UPI ID</label>
                        <input type="text" class="form-input" id="upiId" placeholder="Enter your UPI ID">
                    </div>
                    
                    <button class="form-btn" id="redeemUpiBtn">Redeem via UPI</button>
                </div>
                
                <div class="redeem-option">
                    <h3 class="option-title"><i class="fas fa-code"></i> Code Redemption</h3>
                    <p>Get a redemption code sent to your email</p>
                    
                    <div class="redeem-amounts">
                        <div class="amount-option" data-amount="10" data-coins="3000">
                            <div class="amount-value">$10</div>
                            <div class="amount-coins">3000 Coins</div>
                        </div>
                        <div class="amount-option" data-amount="100" data-coins="10000">
                            <div class="amount-value">$100</div>
                            <div class="amount-coins">10000 Coins</div>
                        </div>
                        <div class="amount-option" data-amount="500" data-coins="15000">
                            <div class="amount-value">$500</div>
                            <div class="amount-coins">15000 Coins</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="codeEmail">Email for Code</label>
                        <input type="email" class="form-input" id="codeEmail" placeholder="Enter your email">
                    </div>
                    
                    <button class="form-btn" id="redeemCodeBtn">Get Redemption Code</button>
                </div>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
        </div>

        <!-- Subscription Screen -->
        <div class="screen subscription-screen" id="subscriptionScreen">
            <h2 class="section-title"><i class="fas fa-crown"></i> Premium Plans</h2>
            <p style="text-align: center; margin-bottom: 30px; color: rgba(255, 255, 255, 0.7);">
                Upgrade your account to unlock unlimited earning potential
            </p>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="plans">
                <div class="plan">
                    <h3 class="plan-name">Starter</h3>
                    <div class="plan-price">₹9</div>
                    <ul class="plan-features">
                        <li>1 Day Unlimited Ads</li>
                        <li>Standard Earning Rates</li>
                        <li>Basic Support</li>
                    </ul>
                    <button class="plan-btn" data-plan="starter" data-price="9">Buy Now</button>
                </div>
                
                <div class="plan">
                    <h3 class="plan-name">Pro</h3>
                    <div class="plan-price">₹19</div>
                    <ul class="plan-features">
                        <li>10 Days Double Coins</li>
                        <li>Unlimited Daily Earnings</li>
                        <li>Priority Support</li>
                    </ul>
                    <button class="plan-btn" data-plan="pro" data-price="19">Buy Now</button>
                </div>
                
                <div class="plan">
                    <h3 class="plan-name">Premium</h3>
                    <div class="plan-price">₹49</div>
                    <ul class="plan-features">
                        <li>7 Days Unlimited Ads</li>
                        <li>Double Coins on All Earnings</li>
                        <li>Priority Support</li>
                    </ul>
                    <button class="plan-btn" data-plan="premium" data-price="49">Buy Now</button>
                </div>
                
                <div class="plan">
                    <h3 class="plan-name">Ultimate</h3>
                    <div class="plan-price">₹99</div>
                    <ul class="plan-features">
                        <li>15 Days Unlimited Ads</li>
                        <li>Double Coins on All Earnings</li>
                        <li>500 Bonus Coins</li>
                    </ul>
                    <button class="plan-btn" data-plan="ultimate" data-price="99">Buy Now</button>
                </div>
                
                <div class="plan">
                    <h3 class="plan-name">VIP</h3>
                    <div class="plan-price">₹199</div>
                    <ul class="plan-features">
                        <li>30 Days Unlimited Ads</li>
                        <li>Double Coins on All Earnings</li>
                        <li>500 Bonus Coins</li>
                        <li>VIP Support</li>
                    </ul>
                    <button class="plan-btn" data-plan="vip" data-price="199">Buy Now</button>
                </div>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
        </div>

        <!-- Daily Bonus Feature Screen -->
        <div class="screen feature-screen" id="dailyBonusScreen">
            <div class="feature-header">
                <button class="feature-back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="feature-title">Daily Bonus</h2>
                <p class="feature-subtitle">Claim your daily bonus of coins</p>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="feature-content">
                <div class="feature-rules">
                    <h3><i class="fas fa-calendar-day"></i> Rules & Information</h3>
                    <ul>
                        <li>Claim your daily bonus every 24 hours</li>
                        <li>Base reward: 20 coins</li>
                        <li>Premium users get double coins (40 coins)</li>
                        <li>Bonus resets at midnight</li>
                        <li>Watch an ad to claim your bonus</li>
                    </ul>
                </div>
                <div class="timer" id="dailyBonusTimer">00:00:00</div>
                <button class="form-btn" id="claimDailyBonus">Claim Your Bonus</button>
            </div>
        </div>

        <!-- Watch Ad Feature Screen -->
        <div class="screen feature-screen" id="watchAdScreen">
            <div class="feature-header">
                <button class="feature-back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="feature-title">Watch Ads & Earn</h2>
                <p class="feature-subtitle">Watch short ads to earn coins</p>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="feature-content">
                <div class="feature-rules">
                    <h3><i class="fas fa-tv"></i> Rules & Information</h3>
                    <ul>
                        <li>Free users: 20 ads per day limit</li>
                        <li>Premium users: Unlimited ads</li>
                        <li>Base reward: 10 coins per ad</li>
                        <li>Premium users get double coins (20 coins)</li>
                        <li>Watch the full ad to receive reward</li>
                    </ul>
                </div>
                <div class="ad-container">
                    <p>Ads Watched Today: <span id="adsWatchedCount">0</span>/<span id="adsLimit">20</span></p>
                    <p>Reward per ad: <span id="adRewardDisplay">10</span> coins</p>
                </div>
                <button class="form-btn" id="startAd">Watch Ad & Earn</button>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
        </div>

        <!-- Scratch Card Feature Screen -->
        <div class="screen feature-screen" id="scratchCardScreen">
            <div class="feature-header">
                <button class="feature-back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="feature-title">Scratch Cards</h2>
                <p class="feature-subtitle">Scratch to reveal your prize</p>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="feature-content">
                <div class="feature-rules">
                    <h3><i class="fas fa-ticket-alt"></i> Rules & Information</h3>
                    <ul>
                        <li>Free users: 10 scratch cards per day</li>
                        <li>Premium users: Unlimited scratch cards</li>
                        <li>Base reward: 0-10 coins per card</li>
                        <li>Premium users get double coins (0-20 coins)</li>
                        <li>Scratch completely to reveal prize</li>
                        <li>Watch an ad to get a scratch card</li>
                    </ul>
                </div>
                <div class="ad-container">
                    <p>Scratch Cards Today: <span id="scratchesCount">0</span>/<span id="scratchesLimit">10</span></p>
                    <p>Possible reward: <span id="scratchRewardDisplay">0-10</span> coins</p>
                </div>
                <div class="scratch-area" id="scratchArea">
                    <div class="scratch-cover">SCRATCH ME</div>
                    <div class="scratch-result" id="scratchResult"></div>
                </div>
                <button class="form-btn" id="newScratchCard">Watch Ad for Scratch Card</button>
            </div>
        </div>

        <!-- Spin Wheel Feature Screen -->
        <div class="screen feature-screen" id="spinWheelScreen">
            <div class="feature-header">
                <button class="feature-back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="feature-title">Spin Wheel</h2>
                <p class="feature-subtitle">Spin the wheel to win coins</p>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="feature-content">
                <div class="feature-rules">
                    <h3><i class="fas fa-sync-alt"></i> Rules & Information</h3>
                    <ul>
                        <li>Free users: 1 spin per day</li>
                        <li>Premium users: Unlimited spins</li>
                        <li>Base reward: 0-10 coins per spin</li>
                        <li>Premium users get double coins (0-20 coins)</li>
                        <li>Spin the wheel and win!</li>
                        <li>Watch an ad to spin the wheel</li>
                    </ul>
                </div>
                <div class="ad-container">
                    <p>Spins Today: <span id="spinsCount">0</span>/<span id="spinsLimit">1</span></p>
                    <p>Possible reward: <span id="spinRewardDisplay">0-10</span> coins</p>
                </div>
                <div class="wheel-container">
                    <div class="wheel-pointer"></div>
                    <div class="wheel" id="wheel"></div>
                </div>
                <button class="spin-btn" id="spinWheel">Watch Ad to Spin</button>
                <div id="spinResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: 600;"></div>
            </div>
        </div>

        <!-- Visit & Earn Feature Screen -->
        <div class="screen feature-screen" id="visitEarnScreen">
            <div class="feature-header">
                <button class="feature-back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="feature-title">Visit & Earn</h2>
                <p class="feature-subtitle">Visit websites to earn coins</p>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="feature-content">
                <div class="feature-rules">
                    <h3><i class="fas fa-globe"></i> Rules & Information</h3>
                    <ul>
                        <li>Visit for 60 seconds to earn coins</li>
                        <li>Base reward: 30 coins per visit</li>
                        <li>Premium users get double coins (60 coins)</li>
                        <li>One visit per day</li>
                        <li>Timer must complete to receive reward</li>
                    </ul>
                </div>
                <div class="ad-container">
                    <p>Reward: <span id="visitRewardDisplay">30</span> coins</p>
                    <p id="visitStatus">Ready to visit!</p>
                </div>
                <div class="visit-timer" id="visitTimer">60</div>
                <button class="form-btn" id="startVisit">Start Visit</button>
            </div>
        </div>

        <!-- Refer & Earn Feature Screen -->
        <div class="screen feature-screen" id="referEarnScreen">
            <div class="feature-header">
                <button class="feature-back-btn" data-screen="home">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 class="feature-title">Refer & Earn</h2>
                <p class="feature-subtitle">Refer friends and earn coins</p>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="feature-content">
                <div class="feature-rules">
                    <h3><i class="fas fa-user-friends"></i> Rules & Information</h3>
                    <ul>
                        <li>Earn 100 coins for each successful referral</li>
                        <li>Premium users get double coins (200 coins)</li>
                        <li>Your friend gets 50 coins when they sign up</li>
                        <li>No limit on referrals</li>
                        <li>Share your referral code with friends</li>
                    </ul>
                </div>
                <div class="ad-container">
                    <p>Your Referrals: <span id="referralsCount">0</span></p>
                    <p>Total Earned from Referrals: <span id="referralEarnings">0</span> coins</p>
                </div>
                <p>Your Referral Code:</p>
                <div class="referral-code" id="referralCode">PROFTA1234</div>
                <p>Share your code with friends:</p>
                <div class="share-buttons">
                    <button class="share-btn whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</button>
                    <button class="share-btn telegram"><i class="fab fa-telegram"></i> Telegram</button>
                    <button class="share-btn facebook"><i class="fab fa-facebook"></i> Facebook</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <h3 class="modal-title" id="modalTitle">Complete Your Purchase</h3>
            <div class="payment-details" id="paymentDetails">
                <!-- Payment details will be inserted here -->
            </div>
            
            <!-- QR Code Section -->
            <div class="qr-section">
                <h3>Scan & Pay via UPI</h3>
                <p>Use any UPI app to scan this QR and send payment securely</p>
                
                <div class="qr-code">
                    <img src="https://raw.githubusercontent.com/profitainindia/profta/main/qr-code.png" alt="UPI QR Code">
                </div>
                
                <a href="upi://pay?pa=9929778349@fam&pn=PROFTA&cu=INR" class="pay-now-btn" id="payNowBtn">
                    Pay Now
                </a>
            </div>
            
            <!-- Banner Ad -->
            <div class="banner-ad">
                <script type="text/javascript">
                    atOptions = {
                        'key' : 'c94097f69bdd589f5fe0f6601e4ff967',
                        'format' : 'iframe',
                        'height' : 50,
                        'width' : 320,
                        'params' : {}
                    };
                </script>
                <script type="text/javascript" src="//www.highperformanceformat.com/c94097f69bdd589f5fe0f6601e4ff967/invoke.js"></script>
            </div>
            
            <div class="payment-upload" id="paymentUpload">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Upload Payment Screenshot</p>
                <input type="file" id="paymentFile" class="file-input" accept="image/*">
                <div class="file-name" id="fileName">No file selected</div>
            </div>
            
            <div class="loading" id="paymentLoading">
                <div class="loading-spinner"></div>
                <p>Activating your plan...</p>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelPayment">Cancel</button>
                <button class="modal-btn confirm" id="confirmPayment" style="display: none;">Confirm Payment</button>
            </div>
        </div>
    </div>

    <!-- Ad Modal -->
    <div class="ad-modal" id="adModal">
        <div class="ad-content">
            <h3 class="ad-title">Watch Ad to Earn Coins</h3>
            <p>Please watch this ad for 10 seconds to earn your reward</p>
            <div class="ad-code-box">
                gotm ad code hear
            </div>
            <div class="ad-timer" id="adTimer">10</div>
            <button class="ad-close" id="closeAd">Close Ad</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="#" class="footer-link">Terms of Service</a>
            <a href="#" class="footer-link">Privacy Policy</a>
            <a href="mailto:gotmprajapat00@gmail.com" class="footer-link">Contact Support</a>
            <a href="#" class="footer-link">FAQ</a>
        </div>
        <p class="contact-email">Contact us at: <a href="mailto:gotmprajapat00@gmail.com" style="color: var(--accent);">gotmprajapat00@gmail.com</a></p>
        <p>We reply within 24 hours</p>
        <p>© 2023 PROFTA - Complete Earning Platform. All rights reserved.</p>
    </footer>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCdLSGdmzccLLVnCFTUYsU9vTa3z_2T9DY",
            authDomain: "rupixo-adc5e.firebaseapp.com",
            databaseURL: "https://rupixo-adc5e-default-rtdb.firebaseio.com",
            projectId: "rupixo-adc5e",
            storageBucket: "rupixo-adc5e.firebasestorage.app",
            messagingSenderId: "79108214868",
            appId: "1:79108214868:web:507a557fdeb5de20d65dc1",
            measurementId: "G-F1D7GX94N1"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Telegram Bot Configuration
        const TELEGRAM_BOT_TOKEN = '8253928607:AAGrVlxJftNEdnDot-f5Do0QJDKoAaTm1d0';
        const TELEGRAM_CHAT_ID = '6225430212';

        // DOM Elements
        const screens = document.querySelectorAll('.screen');
        const navBtns = document.querySelectorAll('.nav-btn');
        const mainNav = document.getElementById('mainNav');
        const userInfo = document.getElementById('userInfo');
        const coinBalance = document.getElementById('coinBalance');
        const profileBtn = document.getElementById('profileBtn');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const showRegisterFromLogin = document.getElementById('showRegisterFromLogin');
        const showLoginFromReg = document.getElementById('showLoginFromReg');
        const registerForm = document.getElementById('registerForm');
        const loginForm = document.getElementById('loginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const premiumStatus = document.getElementById('premiumStatus');
        const totalEarnings = document.getElementById('totalEarnings');
        const totalReferrals = document.getElementById('totalReferrals');
        const daysActive = document.getElementById('daysActive');
        const withdrawalsCount = document.getElementById('withdrawalsCount');
        const withdrawalHistoryBody = document.getElementById('withdrawalHistoryBody');
        const amountOptions = document.querySelectorAll('.amount-option');
        const redeemUpiBtn = document.getElementById('redeemUpiBtn');
        const redeemCodeBtn = document.getElementById('redeemCodeBtn');
        
        // Earning buttons and amounts
        const dailyBonusBtn = document.getElementById('dailyBonusBtn');
        const watchAdBtn = document.getElementById('watchAdBtn');
        const scratchCardBtn = document.getElementById('scratchCardBtn');
        const spinWheelBtn = document.getElementById('spinWheelBtn');
        const visitEarnBtn = document.getElementById('visitEarnBtn');
        const referEarnBtn = document.getElementById('referEarnBtn');
        
        const dailyBonusAmount = document.getElementById('dailyBonusAmount');
        const adRewardAmount = document.getElementById('adRewardAmount');
        const scratchRewardAmount = document.getElementById('scratchRewardAmount');
        const spinRewardAmount = document.getElementById('spinRewardAmount');
        const visitRewardAmount = document.getElementById('visitRewardAmount');
        const referRewardAmount = document.getElementById('referRewardAmount');
        
        // Feature screens
        const featureCards = document.querySelectorAll('.card[data-feature]');
        const backButtons = document.querySelectorAll('.back-btn, .feature-back-btn');
        
        // Payment modal elements
        const paymentModal = document.getElementById('paymentModal');
        const modalTitle = document.getElementById('modalTitle');
        const paymentDetails = document.getElementById('paymentDetails');
        const payNowBtn = document.getElementById('payNowBtn');
        const paymentUpload = document.getElementById('paymentUpload');
        const paymentFile = document.getElementById('paymentFile');
        const fileName = document.getElementById('fileName');
        const cancelPayment = document.getElementById('cancelPayment');
        const confirmPayment = document.getElementById('confirmPayment');
        const paymentLoading = document.getElementById('paymentLoading');
        
        // Ad modal elements
        const adModal = document.getElementById('adModal');
        const adTimer = document.getElementById('adTimer');
        const closeAd = document.getElementById('closeAd');
        
        // Plan buttons
        const planButtons = document.querySelectorAll('.plan-btn');

        // Current user data
        let currentUser = null;
        let userData = null;
        let selectedPlan = null;
        let selectedPlanPrice = null;
        let paymentScreenshot = null;
        let adTimerInterval = null;
        let payNowTimer = null;

        // Base earning amounts
        const baseEarnings = {
            dailyBonus: 20,
            adReward: 10,
            scratchMax: 10,
            spinMax: 10,
            visitReward: 30,
            referReward: 100
        };

        // Daily limits for free users
        const dailyLimits = {
            ads: 20,
            scratches: 10,
            spins: 1
        };

        // Navigation
        navBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const screenId = btn.getAttribute('data-screen');
                showScreen(screenId);
                
                navBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // Back buttons
        backButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const screenId = btn.getAttribute('data-screen');
                showScreen(screenId);
                
                // Activate the home nav button
                navBtns.forEach(b => b.classList.remove('active'));
                document.querySelector('[data-screen="home"]').classList.add('active');
            });
        });

        profileBtn.addEventListener('click', () => {
            showScreen('profile');
            navBtns.forEach(b => b.classList.remove('active'));
        });

        // Feature card clicks
        featureCards.forEach(card => {
            card.addEventListener('click', (e) => {
                if (e.target.classList.contains('card-btn')) return; // Don't trigger if button was clicked
                const feature = card.getAttribute('data-feature');
                showScreen(feature);
            });
        });

        // Auth navigation
        showRegister.addEventListener('click', () => showScreen('register'));
        showLogin.addEventListener('click', () => showScreen('login'));
        showRegisterFromLogin.addEventListener('click', () => showScreen('register'));
        showLoginFromReg.addEventListener('click', () => showScreen('login'));

        // Show screen function
        function showScreen(screenId) {
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId + 'Screen').classList.add('active');
            
            // Show navigation only if user is logged in and not on welcome screen
            if (currentUser && screenId !== 'welcome') {
                mainNav.style.display = 'flex';
            } else {
                mainNav.style.display = 'none';
            }
        }

        // Register form
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const referralCode = document.getElementById('referralCode').value;
            
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    // Create user data in database
                    const userRef = database.ref('users/' + user.uid);
                    const userData = {
                        name: name,
                        email: email,
                        coins: 100,
                        joinDate: new Date().toISOString(),
                        lastBonusClaim: null,
                        adsWatchedToday: 0,
                        scratchesToday: 0,
                        spinsToday: 0,
                        lastVisitClaim: null,
                        referralCode: 'PROFTA' + Math.floor(1000 + Math.random() * 9000),
                        referrals: 0,
                        referralEarnings: 0,
                        withdrawalHistory: [],
                        activePlan: null,
                        planExpiry: null,
                        doubleCoins: false,
                        unlimitedAds: false,
                        totalEarned: 100
                    };
                    
                    userRef.set(userData)
                        .then(() => {
                            alert('Registration successful! You received 100 bonus coins.');
                            loadUserData(user);
                            showScreen('home');
                            
                            // Handle referral if code provided
                            if (referralCode) {
                                processReferral(referralCode, user.uid);
                            }
                        })
                        .catch((error) => {
                            alert('Error saving user data: ' + error.message);
                        });
                })
                .catch((error) => {
                    alert('Registration error: ' + error.message);
                });
        });

        // Process referral
        function processReferral(referralCode, newUserId) {
            // Find user with this referral code
            const usersRef = database.ref('users');
            usersRef.orderByChild('referralCode').equalTo(referralCode).once('value')
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        const referrerId = Object.keys(data)[0];
                        const referrerData = data[referrerId];
                        
                        // Update referrer's data
                        const referrerRef = database.ref('users/' + referrerId);
                        const updatedReferrals = (referrerData.referrals || 0) + 1;
                        const referralReward = referrerData.doubleCoins ? baseEarnings.referReward * 2 : baseEarnings.referReward;
                        const updatedReferralEarnings = (referrerData.referralEarnings || 0) + referralReward;
                        const updatedCoins = (referrerData.coins || 0) + referralReward;
                        const updatedTotal = (referrerData.totalEarned || 0) + referralReward;
                        
                        referrerRef.update({
                            referrals: updatedReferrals,
                            referralEarnings: updatedReferralEarnings,
                            coins: updatedCoins,
                            totalEarned: updatedTotal
                        });
                        
                        // Send Telegram notification
                        sendTelegramNotification(`👥 NEW REFERRAL 👥
Referrer: ${referrerData.email}
New User: ${newUserId}
Referral Code: ${referralCode}
Reward: ${referralReward} coins
Time: ${new Date().toLocaleString()}`);
                    }
                })
                .catch((error) => {
                    console.log('Error processing referral:', error);
                });
        }

        // Login form
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    loadUserData(user);
                    showScreen('home');
                })
                .catch((error) => {
                    alert('Login error: ' + error.message);
                });
        });

        // Logout
        logoutBtn.addEventListener('click', () => {
            auth.signOut()
                .then(() => {
                    currentUser = null;
                    userData = null;
                    showScreen('welcome');
                    userInfo.style.display = 'none';
                    mainNav.style.display = 'none';
                })
                .catch((error) => {
                    alert('Logout error: ' + error.message);
                });
        });

        // Load user data from Firebase
        function loadUserData(user) {
            currentUser = user;
            const userRef = database.ref('users/' + user.uid);
            
            userRef.on('value', (snapshot) => {
                userData = snapshot.val();
                if (userData) {
                    // Update UI with user data
                    coinBalance.textContent = userData.coins;
                    profileName.textContent = userData.name;
                    profileEmail.textContent = userData.email;
                    totalEarnings.textContent = userData.totalEarned || userData.coins;
                    totalReferrals.textContent = userData.referrals;
                    
                    // Update premium status
                    updatePremiumStatus();
                    
                    // Calculate days active
                    const joinDate = new Date(userData.joinDate);
                    const today = new Date();
                    const diffTime = Math.abs(today - joinDate);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    daysActive.textContent = diffDays;
                    
                    // Withdrawal count
                    withdrawalsCount.textContent = userData.withdrawalHistory ? userData.withdrawalHistory.length : 0;
                    
                    // Populate withdrawal history (newest first)
                    if (userData.withdrawalHistory) {
                        withdrawalHistoryBody.innerHTML = '';
                        const sortedHistory = [...userData.withdrawalHistory].reverse();
                        sortedHistory.forEach(withdrawal => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${new Date(withdrawal.date).toLocaleDateString()}</td>
                                <td>$${withdrawal.amount}</td>
                                <td>${withdrawal.coins} Coins</td>
                                <td class="status-${withdrawal.status}">${withdrawal.status}</td>
                            `;
                            withdrawalHistoryBody.appendChild(row);
                        });
                    }
                    
                    // Update feature screens with user data
                    updateFeatureScreens();
                    
                    userInfo.style.display = 'flex';
                    mainNav.style.display = 'flex';
                }
            });
        }

        // Update premium status display
        function updatePremiumStatus() {
            if (userData.activePlan && new Date(userData.planExpiry) > new Date()) {
                premiumStatus.innerHTML = `<span class="premium-badge"><i class="fas fa-crown"></i> ${userData.activePlan.toUpperCase()} PLAN ACTIVE</span>`;
                
                // Update earning amounts for double coins
                if (userData.doubleCoins) {
                    dailyBonusAmount.textContent = baseEarnings.dailyBonus * 2;
                    adRewardAmount.textContent = baseEarnings.adReward * 2;
                    scratchRewardAmount.textContent = `0-${baseEarnings.scratchMax * 2}`;
                    spinRewardAmount.textContent = `0-${baseEarnings.spinMax * 2}`;
                    visitRewardAmount.textContent = baseEarnings.visitReward * 2;
                    referRewardAmount.textContent = baseEarnings.referReward * 2;
                } else {
                    resetEarningAmounts();
                }
            } else {
                premiumStatus.innerHTML = '';
                resetEarningAmounts();
                
                // Reset plan data if expired
                if (userData.activePlan && new Date(userData.planExpiry) <= new Date()) {
                    const userRef = database.ref('users/' + currentUser.uid);
                    userRef.update({
                        activePlan: null,
                        planExpiry: null,
                        doubleCoins: false,
                        unlimitedAds: false
                    });
                }
            }
        }

        // Update feature screens with user data
        function updateFeatureScreens() {
            // Daily Bonus
            const lastBonusClaim = userData.lastBonusClaim ? new Date(userData.lastBonusClaim) : null;
            const now = new Date();
            
            if (lastBonusClaim && (now - lastBonusClaim) < 24 * 60 * 60 * 1000) {
                const nextClaim = new Date(lastBonusClaim.getTime() + 24 * 60 * 60 * 1000);
                const timeLeft = nextClaim - now;
                updateTimer('dailyBonusTimer', timeLeft);
                document.getElementById('claimDailyBonus').disabled = true;
            } else {
                document.getElementById('dailyBonusTimer').textContent = 'Ready to Claim!';
                document.getElementById('claimDailyBonus').disabled = false;
            }
            
            // Watch Ads
            document.getElementById('adsWatchedCount').textContent = userData.adsWatchedToday || 0;
            document.getElementById('adsLimit').textContent = userData.unlimitedAds ? 'Unlimited' : dailyLimits.ads;
            document.getElementById('adRewardDisplay').textContent = userData.doubleCoins ? baseEarnings.adReward * 2 : baseEarnings.adReward;
            
            // Scratch Cards
            document.getElementById('scratchesCount').textContent = userData.scratchesToday || 0;
            document.getElementById('scratchesLimit').textContent = userData.unlimitedAds ? 'Unlimited' : dailyLimits.scratches;
            document.getElementById('scratchRewardDisplay').textContent = userData.doubleCoins ? `0-${baseEarnings.scratchMax * 2}` : `0-${baseEarnings.scratchMax}`;
            
            // Spin Wheel
            document.getElementById('spinsCount').textContent = userData.spinsToday || 0;
            document.getElementById('spinsLimit').textContent = userData.unlimitedAds ? 'Unlimited' : dailyLimits.spins;
            document.getElementById('spinRewardDisplay').textContent = userData.doubleCoins ? `0-${baseEarnings.spinMax * 2}` : `0-${baseEarnings.spinMax}`;
            
            // Visit & Earn
            document.getElementById('visitRewardDisplay').textContent = userData.doubleCoins ? baseEarnings.visitReward * 2 : baseEarnings.visitReward;
            const lastVisitClaim = userData.lastVisitClaim ? new Date(userData.lastVisitClaim) : null;
            
            if (lastVisitClaim && (now - lastVisitClaim) < 24 * 60 * 60 * 1000) {
                document.getElementById('visitStatus').textContent = 'Already claimed today';
                document.getElementById('startVisit').disabled = true;
            } else {
                document.getElementById('visitStatus').textContent = 'Ready to visit!';
                document.getElementById('startVisit').disabled = false;
            }
            
            // Refer & Earn
            document.getElementById('referralsCount').textContent = userData.referrals || 0;
            document.getElementById('referralEarnings').textContent = userData.referralEarnings || 0;
            document.getElementById('referralCode').textContent = userData.referralCode || 'PROFTA1234';
        }

        // Reset earning amounts to base values
        function resetEarningAmounts() {
            dailyBonusAmount.textContent = baseEarnings.dailyBonus;
            adRewardAmount.textContent = baseEarnings.adReward;
            scratchRewardAmount.textContent = `0-${baseEarnings.scratchMax}`;
            spinRewardAmount.textContent = `0-${baseEarnings.spinMax}`;
            visitRewardAmount.textContent = baseEarnings.visitReward;
            referRewardAmount.textContent = baseEarnings.referReward;
        }

        // Check auth state
        auth.onAuthStateChanged((user) => {
            if (user) {
                loadUserData(user);
                showScreen('home');
            } else {
                showScreen('welcome');
                userInfo.style.display = 'none';
                mainNav.style.display = 'none';
            }
        });

        // Amount selection for redemption
        let selectedAmount = null;
        let selectedCoins = null;
        
        amountOptions.forEach(option => {
            option.addEventListener('click', () => {
                amountOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                
                selectedAmount = option.getAttribute('data-amount');
                selectedCoins = option.getAttribute('data-coins');
            });
        });

        // UPI redemption
        redeemUpiBtn.addEventListener('click', () => {
            if (!selectedAmount) {
                alert('Please select an amount first');
                return;
            }
            
            const upiId = document.getElementById('upiId').value;
            if (!upiId) {
                alert('Please enter your UPI ID');
                return;
            }
            
            if (userData.coins < selectedCoins) {
                alert(`You need ${selectedCoins} coins to redeem $${selectedAmount}`);
                return;
            }
            
            // Deduct coins and add to withdrawal history
            const userRef = database.ref('users/' + currentUser.uid);
            const withdrawal = {
                date: new Date().toISOString(),
                amount: selectedAmount,
                coins: selectedCoins,
                method: 'UPI',
                upiId: upiId,
                status: 'pending'
            };
            
            const updatedCoins = userData.coins - parseInt(selectedCoins);
            const updatedWithdrawals = userData.withdrawalHistory ? [...userData.withdrawalHistory, withdrawal] : [withdrawal];
            
            userRef.update({
                coins: updatedCoins,
                withdrawalHistory: updatedWithdrawals
            })
            .then(() => {
                alert(`Withdrawal request for $${selectedAmount} submitted! It will be processed within 24 hours.`);
                document.getElementById('upiId').value = '';
                amountOptions.forEach(opt => opt.classList.remove('selected'));
                selectedAmount = null;
                selectedCoins = null;
                
                // Send Telegram notification
                sendTelegramNotification(`💸 WITHDRAWAL REQUEST 💸
Amount: $${withdrawal.amount}
Coins: ${withdrawal.coins}
User: ${userData.email}
Name: ${userData.name}
UPI ID: ${withdrawal.upiId}
Time: ${new Date().toLocaleString()}`);
            })
            .catch((error) => {
                alert('Error processing withdrawal: ' + error.message);
            });
        });

        // Code redemption
        redeemCodeBtn.addEventListener('click', () => {
            if (!selectedAmount) {
                alert('Please select an amount first');
                return;
            }
            
            const codeEmail = document.getElementById('codeEmail').value;
            if (!codeEmail) {
                alert('Please enter your email for code delivery');
                return;
            }
            
            if (userData.coins < selectedCoins) {
                alert(`You need ${selectedCoins} coins to redeem $${selectedAmount}`);
                return;
            }
            
            // Deduct coins and add to withdrawal history
            const userRef = database.ref('users/' + currentUser.uid);
            const withdrawal = {
                date: new Date().toISOString(),
                amount: selectedAmount,
                coins: selectedCoins,
                method: 'Code',
                codeEmail: codeEmail,
                status: 'pending'
            };
            
            const updatedCoins = userData.coins - parseInt(selectedCoins);
            const updatedWithdrawals = userData.withdrawalHistory ? [...userData.withdrawalHistory, withdrawal] : [withdrawal];
            
            userRef.update({
                coins: updatedCoins,
                withdrawalHistory: updatedWithdrawals
            })
            .then(() => {
                alert(`Redemption code for $${selectedAmount} requested! It will be sent to ${codeEmail} within 24 hours.`);
                document.getElementById('codeEmail').value = '';
                amountOptions.forEach(opt => opt.classList.remove('selected'));
                selectedAmount = null;
                selectedCoins = null;
                
                // Send Telegram notification
                sendTelegramNotification(`🎫 REDEEM CODE REQUEST 🎫
Amount: $${withdrawal.amount}
Coins: ${withdrawal.coins}
User: ${userData.email}
Name: ${userData.name}
Code Email: ${withdrawal.codeEmail}
Time: ${new Date().toLocaleString()}`);
            })
            .catch((error) => {
                alert('Error processing code request: ' + error.message);
            });
        });

        // Earning methods - Home screen buttons
        dailyBonusBtn.addEventListener('click', () => {
            showScreen('dailyBonus');
        });

        watchAdBtn.addEventListener('click', () => {
            showScreen('watchAd');
        });

        scratchCardBtn.addEventListener('click', () => {
            showScreen('scratchCard');
        });

        spinWheelBtn.addEventListener('click', () => {
            showScreen('spinWheel');
        });

        visitEarnBtn.addEventListener('click', () => {
            showScreen('visitEarn');
        });

        referEarnBtn.addEventListener('click', () => {
            showScreen('referEarn');
        });

        // Daily Bonus Feature
        document.getElementById('claimDailyBonus').addEventListener('click', () => {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            const now = new Date();
            const lastClaim = userData.lastBonusClaim ? new Date(userData.lastBonusClaim) : null;
            
            if (lastClaim && (now - lastClaim) < 24 * 60 * 60 * 1000) {
                const nextClaim = new Date(lastClaim.getTime() + 24 * 60 * 60 * 1000);
                const hoursLeft = Math.ceil((nextClaim - now) / (60 * 60 * 1000));
                alert(`You can claim your next daily bonus in ${hoursLeft} hours`);
                return;
            }
            
            // Show ad before claiming bonus
            showAdModal().then((completed) => {
                if (!completed) {
                    alert('You must watch the ad completely to claim your bonus');
                    return;
                }
                
                // Calculate reward (double if premium)
                let bonus = baseEarnings.dailyBonus;
                if (userData.doubleCoins) {
                    bonus *= 2;
                }
                
                const userRef = database.ref('users/' + currentUser.uid);
                const updatedCoins = userData.coins + bonus;
                const updatedTotal = (userData.totalEarned || 0) + bonus;
                
                userRef.update({
                    coins: updatedCoins,
                    totalEarned: updatedTotal,
                    lastBonusClaim: now.toISOString()
                })
                .then(() => {
                    alert(`Daily bonus of ${bonus} coins claimed!`);
                    showScreen('home');
                })
                .catch((error) => {
                    alert('Error claiming bonus: ' + error.message);
                });
            });
        });

        // Watch Ad Feature
        document.getElementById('startAd').addEventListener('click', () => {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            if (userData.adsWatchedToday >= dailyLimits.ads && !userData.unlimitedAds) {
                alert('You have reached your daily limit of ' + dailyLimits.ads + ' ads');
                return;
            }
            
            showAdModal().then((completed) => {
                if (!completed) {
                    alert('You must watch the ad completely to earn coins');
                    return;
                }
                
                // Calculate reward (double if premium)
                let reward = baseEarnings.adReward;
                if (userData.doubleCoins) {
                    reward *= 2;
                }
                
                const userRef = database.ref('users/' + currentUser.uid);
                const updatedCoins = userData.coins + reward;
                const updatedAdsWatched = (userData.adsWatchedToday || 0) + 1;
                const updatedTotal = (userData.totalEarned || 0) + reward;
                
                userRef.update({
                    coins: updatedCoins,
                    adsWatchedToday: updatedAdsWatched,
                    totalEarned: updatedTotal
                })
                .then(() => {
                    alert(`You earned ${reward} coins from watching the ad!`);
                })
                .catch((error) => {
                    alert('Error updating coins: ' + error.message);
                });
            });
        });

        // Scratch Card Feature
        let isScratching = false;
        let scratchResult = 0;
        
        document.getElementById('newScratchCard').addEventListener('click', () => {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            if (userData.scratchesToday >= dailyLimits.scratches && !userData.unlimitedAds) {
                alert('You have reached your daily limit of ' + dailyLimits.scratches + ' scratch cards');
                return;
            }
            
            // Show ad before getting scratch card
            showAdModal().then((completed) => {
                if (!completed) {
                    alert('You must watch the ad completely to get a scratch card');
                    return;
                }
                
                // Reset scratch area
                const scratchArea = document.getElementById('scratchArea');
                const scratchCover = scratchArea.querySelector('.scratch-cover');
                const scratchResultDiv = document.getElementById('scratchResult');
                
                scratchCover.style.display = 'flex';
                scratchResultDiv.textContent = '';
                scratchResultDiv.style.display = 'none';
                
                // Generate random reward
                const maxReward = userData.doubleCoins ? baseEarnings.scratchMax * 2 : baseEarnings.scratchMax;
                scratchResult = Math.floor(Math.random() * (maxReward + 1));
                
                // Enable scratching
                isScratching = true;
            });
        });

        // Scratch card interaction
        const scratchArea = document.getElementById('scratchArea');
        let scratchCanvas = null;
        let scratchCtx = null;
        
        scratchArea.addEventListener('mousedown', startScratching);
        scratchArea.addEventListener('touchstart', startScratching);
        
        function startScratching(e) {
            if (!isScratching) return;
            
            e.preventDefault();
            
            if (!scratchCanvas) {
                scratchCanvas = document.createElement('canvas');
                scratchCanvas.width = scratchArea.offsetWidth;
                scratchCanvas.height = scratchArea.offsetHeight;
                scratchCanvas.style.position = 'absolute';
                scratchCanvas.style.top = '0';
                scratchCanvas.style.left = '0';
                scratchCanvas.style.pointerEvents = 'none';
                scratchArea.appendChild(scratchCanvas);
                
                scratchCtx = scratchCanvas.getContext('2d');
                scratchCtx.fillStyle = 'transparent';
                scratchCtx.fillRect(0, 0, scratchCanvas.width, scratchCanvas.height);
            }
            
            scratchArea.addEventListener('mousemove', scratch);
            scratchArea.addEventListener('touchmove', scratch);
            scratchArea.addEventListener('mouseup', stopScratching);
            scratchArea.addEventListener('touchend', stopScratching);
            
            scratch(e);
        }
        
        function scratch(e) {
            if (!isScratching) return;
            
            const rect = scratchArea.getBoundingClientRect();
            let x, y;
            
            if (e.type.includes('mouse')) {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            } else {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            }
            
            scratchCtx.globalCompositeOperation = 'destination-out';
            scratchCtx.beginPath();
            scratchCtx.arc(x, y, 20, 0, Math.PI * 2);
            scratchCtx.fill();
            
            // Check if enough area is scratched
            const imageData = scratchCtx.getImageData(0, 0, scratchCanvas.width, scratchCanvas.height);
            const pixels = imageData.data;
            let transparentPixels = 0;
            
            for (let i = 3; i < pixels.length; i += 4) {
                if (pixels[i] === 0) {
                    transparentPixels++;
                }
            }
            
            const transparentPercent = (transparentPixels / (pixels.length / 4)) * 100;
            
            if (transparentPercent > 30) {
                revealScratchResult();
            }
        }
        
        function stopScratching() {
            scratchArea.removeEventListener('mousemove', scratch);
            scratchArea.removeEventListener('touchmove', scratch);
        }
        
        function revealScratchResult() {
            isScratching = false;
            
            const scratchCover = scratchArea.querySelector('.scratch-cover');
            const scratchResultDiv = document.getElementById('scratchResult');
            
            scratchCover.style.display = 'none';
            scratchResultDiv.textContent = scratchResult + ' COINS';
            scratchResultDiv.style.display = 'flex';
            
            // Award coins
            const userRef = database.ref('users/' + currentUser.uid);
            const updatedCoins = userData.coins + scratchResult;
            const updatedScratches = (userData.scratchesToday || 0) + 1;
            const updatedTotal = (userData.totalEarned || 0) + scratchResult;
            
            userRef.update({
                coins: updatedCoins,
                scratchesToday: updatedScratches,
                totalEarned: updatedTotal
            })
            .then(() => {
                setTimeout(() => {
                    alert(`You won ${scratchResult} coins from the scratch card!`);
                }, 500);
            })
            .catch((error) => {
                alert('Error updating coins: ' + error.message);
            });
            
            // Clean up
            if (scratchCanvas) {
                scratchCanvas.remove();
                scratchCanvas = null;
                scratchCtx = null;
            }
        }

        // Spin Wheel Feature
        document.getElementById('spinWheel').addEventListener('click', () => {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            if (userData.spinsToday >= dailyLimits.spins && !userData.unlimitedAds) {
                alert('You have reached your daily limit of ' + dailyLimits.spins + ' spin');
                return;
            }
            
            // Show ad before spinning
            showAdModal().then((completed) => {
                if (!completed) {
                    alert('You must watch the ad completely to spin the wheel');
                    return;
                }
                
                const wheel = document.getElementById('wheel');
                const spinBtn = document.getElementById('spinWheel');
                const spinResult = document.getElementById('spinResult');
                
                spinBtn.disabled = true;
                spinResult.textContent = '';
                
                // Calculate reward (double if premium)
                const maxReward = userData.doubleCoins ? baseEarnings.spinMax * 2 : baseEarnings.spinMax;
                const reward = Math.floor(Math.random() * (maxReward + 1));
                
                // Spin animation
                const spins = 5 + Math.random() * 5; // 5-10 spins
                const degrees = 360 * spins + (reward * (360 / (maxReward + 1)));
                
                wheel.style.transform = `rotate(${degrees}deg)`;
                
                setTimeout(() => {
                    // Award coins after spin completes
                    const userRef = database.ref('users/' + currentUser.uid);
                    const updatedCoins = userData.coins + reward;
                    const updatedSpins = (userData.spinsToday || 0) + 1;
                    const updatedTotal = (userData.totalEarned || 0) + reward;
                    
                    userRef.update({
                        coins: updatedCoins,
                        spinsToday: updatedSpins,
                        totalEarned: updatedTotal
                    })
                    .then(() => {
                        spinResult.textContent = `You won ${reward} coins!`;
                        spinBtn.disabled = false;
                    })
                    .catch((error) => {
                        alert('Error updating coins: ' + error.message);
                        spinBtn.disabled = false;
                    });
                }, 3000);
            });
        });

        // Visit & Earn Feature
        let visitTimerInterval = null;
        
        document.getElementById('startVisit').addEventListener('click', () => {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            const now = new Date();
            const lastClaim = userData.lastVisitClaim ? new Date(userData.lastVisitClaim) : null;
            
            if (lastClaim && (now - lastClaim) < 24 * 60 * 60 * 1000) {
                alert('You can only claim visit rewards once per day');
                return;
            }
            
            // Open visit website in new tab
            window.open('https://profitaindia.github.io/earnbygotm/', '_blank');
            
            const visitTimer = document.getElementById('visitTimer');
            const startVisitBtn = document.getElementById('startVisit');
            let timeLeft = 60;
            
            startVisitBtn.disabled = true;
            visitTimer.textContent = timeLeft;
            
            visitTimerInterval = setInterval(() => {
                timeLeft--;
                visitTimer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(visitTimerInterval);
                    
                    // Calculate reward (double if premium)
                    let reward = baseEarnings.visitReward;
                    if (userData.doubleCoins) {
                        reward *= 2;
                    }
                    
                    // Award coins after timer completes
                    const userRef = database.ref('users/' + currentUser.uid);
                    const updatedCoins = userData.coins + reward;
                    const updatedTotal = (userData.totalEarned || 0) + reward;
                    
                    userRef.update({
                        coins: updatedCoins,
                        totalEarned: updatedTotal,
                        lastVisitClaim: now.toISOString()
                    })
                    .then(() => {
                        alert(`Visit completed! You earned ${reward} coins.`);
                        startVisitBtn.disabled = false;
                        visitTimer.textContent = '60';
                    })
                    .catch((error) => {
                        alert('Error updating coins: ' + error.message);
                        startVisitBtn.disabled = false;
                        visitTimer.textContent = '60';
                    });
                }
            }, 1000);
        });

        // Refer & Earn Feature
        const shareButtons = document.querySelectorAll('.share-btn');
        
        shareButtons.forEach(button => {
            button.addEventListener('click', () => {
                const platform = button.classList[1]; // whatsapp, telegram, or facebook
                const referralCode = userData.referralCode || 'PROFTA1234';
                let shareUrl = '';
                
                switch(platform) {
                    case 'whatsapp':
                        shareUrl = `https://wa.me/?text=Join PROFTA and start earning money! Use my referral code: ${referralCode}`;
                        break;
                    case 'telegram':
                        shareUrl = `https://t.me/share/url?url=https://profta.com&text=Join PROFTA and start earning money! Use my referral code: ${referralCode}`;
                        break;
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=https://profta.com&quote=Join PROFTA and start earning money! Use my referral code: ${referralCode}`;
                        break;
                }
                
                window.open(shareUrl, '_blank');
            });
        });

        // Ad Modal Functionality
        function showAdModal() {
            return new Promise((resolve) => {
                adModal.classList.add('active');
                let timeLeft = 10;
                adTimer.textContent = timeLeft;
                closeAd.style.display = 'none';
                
                adTimerInterval = setInterval(() => {
                    timeLeft--;
                    adTimer.textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(adTimerInterval);
                        closeAd.style.display = 'block';
                        // Auto close after 2 seconds
                        setTimeout(() => {
                            adModal.classList.remove('active');
                            resolve(true);
                        }, 2000);
                    }
                }, 1000);
                
                closeAd.addEventListener('click', () => {
                    adModal.classList.remove('active');
                    clearInterval(adTimerInterval);
                    
                    // Only resolve as completed if timer reached 0
                    if (timeLeft <= 0) {
                        resolve(true);
                    } else {
                        resolve(false); // Ad not completed
                    }
                });
            });
        }

        // Timer update function
        function updateTimer(timerId, timeLeft) {
            const timer = document.getElementById(timerId);
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            timer.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Plan purchase
        planButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (!currentUser) {
                    alert('Please login first to purchase a plan');
                    showScreen('login');
                    return;
                }
                
                selectedPlan = button.getAttribute('data-plan');
                selectedPlanPrice = button.getAttribute('data-price');
                
                // Show payment modal
                showPaymentModal(selectedPlan, selectedPlanPrice);
            });
        });

        // Show payment modal
        function showPaymentModal(plan, price) {
            modalTitle.textContent = `Purchase ${plan.charAt(0).toUpperCase() + plan.slice(1)} Plan`;
            paymentDetails.innerHTML = `
                <p><strong>Plan:</strong> ${plan.toUpperCase()}</p>
                <p><strong>Price:</strong> ₹${price}</p>
                <p><strong>User:</strong> ${userData.email}</p>
                <p><strong>Name:</strong> ${userData.name}</p>
                <p>Scan the QR code or click Pay Now to make payment</p>
            `;
            
            // Reset UI state
            confirmPayment.style.display = 'none';
            paymentLoading.style.display = 'none';
            payNowBtn.style.display = 'inline-block';
            paymentFile.value = '';
            fileName.textContent = 'No file selected';
            paymentScreenshot = null;
            
            paymentModal.classList.add('active');
            
            // Start timer for Pay Now button
            let payNowTimeLeft = 10;
            payNowBtn.textContent = `Pay Now (${payNowTimeLeft})`;
            payNowBtn.disabled = true;
            
            payNowTimer = setInterval(() => {
                payNowTimeLeft--;
                payNowBtn.textContent = `Pay Now (${payNowTimeLeft})`;
                
                if (payNowTimeLeft <= 0) {
                    clearInterval(payNowTimer);
                    payNowBtn.textContent = 'Pay Now';
                    payNowBtn.disabled = false;
                    
                    // Show confirm button after Pay Now is enabled
                    setTimeout(() => {
                        confirmPayment.style.display = 'block';
                    }, 10000); // 10 seconds
                }
            }, 1000);
        }

        // File upload handling
        paymentUpload.addEventListener('click', () => {
            paymentFile.click();
        });

        paymentFile.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                paymentScreenshot = e.target.files[0];
                fileName.textContent = paymentScreenshot.name;
            }
        });

        // Cancel payment
        cancelPayment.addEventListener('click', () => {
            paymentModal.classList.remove('active');
            paymentFile.value = '';
            fileName.textContent = 'No file selected';
            paymentScreenshot = null;
            if (payNowTimer) clearInterval(payNowTimer);
        });

        // Confirm payment
        confirmPayment.addEventListener('click', () => {
            if (!paymentScreenshot) {
                alert('Please upload your payment screenshot');
                return;
            }
            
            // Show loading
            paymentLoading.style.display = 'block';
            confirmPayment.disabled = true;
            
            // Upload screenshot to Firebase Storage
            const storageRef = storage.ref(`payment_screenshots/${currentUser.uid}/${Date.now()}_${paymentScreenshot.name}`);
            const uploadTask = storageRef.put(paymentScreenshot);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    // Progress monitoring can be added here
                },
                (error) => {
                    alert('Error uploading screenshot: ' + error.message);
                    paymentLoading.style.display = 'none';
                    confirmPayment.disabled = false;
                },
                () => {
                    // Get download URL
                    uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                        // Save plan purchase to database
                        const userRef = database.ref('users/' + currentUser.uid);
                        const now = new Date();
                        let planExpiry = new Date();
                        
                        // Set plan expiry based on plan type
                        switch(selectedPlan) {
                            case 'starter':
                                planExpiry.setDate(planExpiry.getDate() + 1);
                                break;
                            case 'pro':
                                planExpiry.setDate(planExpiry.getDate() + 10);
                                break;
                            case 'premium':
                                planExpiry.setDate(planExpiry.getDate() + 7);
                                break;
                            case 'ultimate':
                                planExpiry.setDate(planExpiry.getDate() + 15);
                                break;
                            case 'vip':
                                planExpiry.setDate(planExpiry.getDate() + 30);
                                break;
                        }
                        
                        // Set plan benefits
                        const doubleCoins = ['pro', 'premium', 'ultimate', 'vip'].includes(selectedPlan);
                        const unlimitedAds = ['starter', 'premium', 'ultimate', 'vip'].includes(selectedPlan);
                        
                        // Add bonus coins for specific plans
                        let bonusCoins = 0;
                        if (['ultimate', 'vip'].includes(selectedPlan)) {
                            bonusCoins = 500;
                        }
                        
                        const updatedCoins = userData.coins + bonusCoins;
                        const updatedTotal = (userData.totalEarned || 0) + bonusCoins;
                        
                        userRef.update({
                            activePlan: selectedPlan,
                            planExpiry: planExpiry.toISOString(),
                            doubleCoins: doubleCoins,
                            unlimitedAds: unlimitedAds,
                            coins: updatedCoins,
                            totalEarned: updatedTotal
                        })
                        .then(() => {
                            // Show loading for 5 seconds
                            setTimeout(() => {
                                paymentModal.classList.remove('active');
                                paymentFile.value = '';
                                fileName.textContent = 'No file selected';
                                paymentScreenshot = null;
                                paymentLoading.style.display = 'none';
                                confirmPayment.disabled = false;
                                
                                alert(`Plan purchased successfully! ${bonusCoins > 0 ? `You received ${bonusCoins} bonus coins. ` : ''}Enjoy your premium benefits.`);
                                
                                // Send Telegram notification (without screenshot)
                                sendTelegramNotification(`💰 NEW PLAN PURCHASE 💰
Plan: ${selectedPlan.toUpperCase()}
Amount: ₹${selectedPlanPrice}
User: ${userData.email}
Name: ${userData.name}
Time: ${now.toLocaleString()}`);
                            }, 5000);
                        })
                        .catch((error) => {
                            alert('Error saving plan data: ' + error.message);
                            paymentLoading.style.display = 'none';
                            confirmPayment.disabled = false;
                        });
                    });
                }
            );
        });

        // Send Telegram notification
        function sendTelegramNotification(message) {
            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            const data = {
                chat_id: TELEGRAM_CHAT_ID,
                text: message,
                parse_mode: 'HTML'
            };
            
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Telegram notification sent:', data);
            })
            .catch((error) => {
                console.error('Error sending Telegram notification:', error);
            });
        }

        // Initialize the app
        function initApp() {
            // Check if user is already logged in
            auth.onAuthStateChanged((user) => {
                if (user) {
                    loadUserData(user);
                    showScreen('home');
                } else {
                    showScreen('welcome');
                }
            });
        }

        // Start the app
        initApp();
    </script>
</body>
</html>
